<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>그룹코드 등록 - PlanfAi 관리자</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/admin/js/admin_common.js"></script>
    <link href="/admin/css/admin_style.css" rel="stylesheet">
    <style>
        .form-table { width: 100%; border-collapse: collapse; background: #fff; margin-bottom: 30px; }
        .form-table th { background: #f9f9f9; padding: 15px; border: 1px solid #ddd; width: 180px; text-align: center; font-weight: bold; }
        .form-table td { padding: 10px 15px; border: 1px solid #ddd; }
        .form-control { border-radius: 2px; }
    </style>
</head>
<body>
    <div id="app">
        <admin-header></admin-header>

        <div class="main-container">
            <admin-sidebar></admin-sidebar>

            <main class="content">
                <div class="page-title-box">
                    <h2 class="page-title">그룹코드 등록</h2>
                    <div class="breadcrumb-area">
                        <i class="bi bi-house-door"></i> > 시스템 > <span class="text-dark fw-medium">코드관리</span>
                    </div>
                </div>

                <div class="card shadow-sm border-0 p-4" style="background-color: #f4f7f6;">
                    <table class="form-table">
                        <tr>
                            <th>그룹코드</th>
                            <td><input type="text" v-model="form.groupId" class="form-control" placeholder="그룹코드"></td>
                        </tr>
                        <tr>
                            <th>그룹코드명</th>
                            <td><input type="text" v-model="form.groupNm" class="form-control" placeholder="그룹코드명"></td>
                        </tr>
                        <tr>
                            <th>영문그룹코드명</th>
                            <td><input type="text" v-model="form.groupNmEng" class="form-control" placeholder="영문그룹코드명"></td>
                        </tr>
                        <tr>
                            <th>비고</th>
                            <td><textarea v-model="form.rm" class="form-control" rows="5" placeholder="비고"></textarea></td>
                        </tr>
                    </table>

                    <div class="d-flex justify-content-center gap-2">
                        <button class="btn btn-outline-secondary px-4" @click="goBack"><i class="bi bi-reply-fill"></i> 목록</button>
                        <button class="btn btn-primary px-4" style="background-color: #2b4b8a;" @click="saveGroup"><i class="bi bi-pencil-square"></i> 등록</button>
                    </div>
                </div>
                <admin-footer></admin-footer>
            </main>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        const app = createApp({
            setup() {
                const form = ref({ groupId: '', groupNm: '', groupNmEng: '', rm: '' });

                const saveGroup = () => {
                    if (!form.value.groupId || !form.value.groupNm) {
                        alert('코드와 명칭을 입력해주세요.');
                        return;
                    }
                    axios.post('/api/admin/code/groups', form.value)
                        .then(res => {
                            alert(res.data);
                            location.href = '/admin/code/selectPageListGroupCodeMgt.do';
                        })
                        .catch(err => alert('등록 실패: ' + (err.response?.data || '')));
                };

                const goBack = () => location.href = '/admin/code/selectPageListGroupCodeMgt.do';

                onMounted(() => {
                    AdminMenu.init();
                });

                return { form, saveGroup, goBack };
            }
        });
        AdminLayout.register(app);
        app.mount('#app');
    </script>
</body>
</html>
